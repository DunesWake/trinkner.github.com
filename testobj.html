<script type="module">
	import * as THREE from './/js/three.module.js';
	import {OBJLoader2} from './/js/OBJLoader2.js';
	
	var scene;
	var renderer;
	var camera;
	var light0;
	var form0;
	var manager = new THREE.LoadingManager();
	var loader = new OBJLoader2(manager);
	init();
	load();
	// animate called in .onLoad
	
	function init() {
		renderer = new THREE.WebGLRenderer({alpha: true});
		renderer.setSize(800, window.innerHeight);
		document.body.appendChild(renderer.domElement);
		scene = new THREE.Scene();

		light0 = new THREE.PointLight(0xFFFFFF);
		light0.position.set(-100, -200, 100);
		scene.add(light0);
		
		camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
		camera.position.z = 6.25;
		
	}
	
	function load() {
		loader.load('.//forms/manifolg.obj', function(points) {
			form0 = points;
		});
		manager.onLoad = function() {
			form0.updateMatrixWorld();
			form0.rotateX(6);
			form0.rotateY(2);
// 			form0.translateY(2);
			scene.add(form0);
			anim();
		};
	}
	
	function anim() {
		let animate = function() {
			requestAnimationFrame(animate);
			form0.rotation.x += 0.0029;
			form0.rotation.y += 0.0029;
			renderer.render(scene, camera);
		};
		animate();
	}
</script>
